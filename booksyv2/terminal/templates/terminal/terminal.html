{% extends 'terminal/base.html' %}

{% block content %}
<div class="auth-container">
    <div class="auth-form booking-form">
        <h2>Book an Appointment</h2>
        
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <form method="POST" action="{% url 'booking' %}">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="service">Service</label>
                <select name="service" id="service" required>
                    <option value="">Select a service</option>
                    {% for service_code, service_name in services %}
                        <option value="{{ service_code }}">{{ service_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="day">Date</label>
                <input type="date" name="day" id="day" required min="{{ today|date:'Y-m-d' }}">
            </div>
            
            <div class="form-group">
                <label for="time">Time</label>
                <select name="time" id="time" required>
                    <option value="">Select a time</option>
                    {% for time_value, time_display in times %}
                        <option value="{{ time_value }}">{{ time_display }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <button type="submit">Book Appointment</button>
        </form>
    </div>

    <div class="auth-form appointments-list">
        <h2>My Appointments</h2>
        {% if appointments %}
            <div class="appointments-container">
                {% for appointment in appointments %}
                    <div class="appointment-item">
                        <div class="appointment-date">{{ appointment.day|date:"l, F j, Y" }}</div>
                        <div class="appointment-time">{{ appointment.time }}</div>
                        <div class="appointment-service">{{ appointment.service }}</div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-appointments">No appointments scheduled</p>
        {% endif %}
    </div>
</div>
{% endblock %}
